<script lang="ts" setup>
import { getPhraseApi } from '@/api/User'
import { useUserStore } from '@/store/modules/user'
import { ref, onMounted } from 'vue'
import { Echart } from '@/components/Echart'
import { EChartsOption } from 'echarts'

const userStore = useUserStore()
const userPic = userStore.getUserPic ? userStore.getUserPic : null

// åäººåè¨€
const phraseRef = ref('')
const authorRef = ref('')

// å›¾è¡¨æ•°æ®
const EchartOptions = ref({
  data: {
    legend: {
      top: '5%',
      left: 'center',
      textStyle: {
        color: "rgba(66, 193, 248, 1)"
      }
    },
    series: [
      {
        type: 'pie',
        radius: ['30%', '70%'],
        avoidLabelOverlap: false,
        itemStyle: {
          borderRadius: 10,
          borderColor: '#fff',
          borderWidth: 2
        },
        label: {
          show: false,
          position: 'center'
        },
        emphasis: {
          label: {
            show: true,
            fontSize: 40,
            fontWeight: 'bold'
          }
        },
        labelLine: {
          show: false
        },
        data: [
          { value: 44, name: 'Vue' },
          { value: 29, name: 'TS' },
          { value: 18, name: 'JS' },
          { value: 8, name: 'HTML' },
          { value: 5, name: 'Other' }
        ]
      }
    ]
  }
})

const getPhrase = async () => {
  const res = await getPhraseApi()
  phraseRef.value = res.data.phrase
  authorRef.value = res.data.author
}

const toDocument = () => {
  window.open('https://github.com/cxwii/cxwii-admin')
}

onMounted(() => {
  getPhrase()
})
</script>

<template>
  <div class="homeContent">
    <div class="head">
      <div class="userIofo mr-5 shadow-md bg-[#f5f5f5] dark:bg-[#282727]">
        <div class="userIofoHead">
          <img v-if="userPic" :src="userPic" alt="" class="rounded-full w-14" />
          <img v-else src="@/assets/imgs/user.png" alt="" class="rounded-full w-14" />
          <div class="opacity-80 break-all ml-5 text-xl">Hello,{{ userStore.getUsername }}</div>
        </div>
        <div class="userIofoBottom">
          <div class="opacity-70 mt-5 text-sm">{{ phraseRef }}</div>
          <div class="mt-5 flex justify-end opacity-40 text-xs">â€”â€” {{ authorRef }}</div>
        </div>
      </div>
      <div class="synopsis shadow-md bg-[#f5f5f5] dark:bg-[#282727]">
        <div class="text-xl m-5">âœ¨æ¬¢è¿ä½¿ç”¨cxwii-Admin</div>
        <div class="text-base m-6 opacity-80"
          >è¿™æ˜¯ä¸€æ¬¾æœåŠ¡äºå‰ç«¯å¼€å‘è€…,ä»¥å¼€ç®±å³ç”¨,ç¬¦åˆç›´è§‰ä½œä¸ºä¸»æ—¨çš„é›†æˆè§£å†³æ–¹æ¡ˆä¸­å¿ƒã€‚é€‚åˆä½œä¸ºå„ç±»ä¸šåŠ¡è§£å†³æ–¹æ¡ˆ,é¡¹ç›®å¯åŠ¨éª¨æ¶ã€‚ç»å†åå¤æ‰“ç£¨,ä¸æ–­ä¿®æ”¹,æ¬¢è¿å¤§å®¶çš„ä½¿ç”¨ã€‚</div
        >
        <div class="flex justify-end m-5">
          <el-button @click="toDocument">æ¬¢è¿Starred ğŸ¤</el-button>
        </div>
      </div>
    </div>
    <div class="bottom mt-5">
      <div class="elaboration mr-5 shadow-md bg-[#f5f5f5] dark:bg-[#282727]">
        <div class="elaborationHead text-xl">ğŸ’¡<b class="ml-1">ç‰¹æ€§</b></div>
        <div class="elaborationBottom mt-8">
          <div class="m-3"
            >ğŸ‡ é‡‡ç”¨<b> ç°ä»£WEB </b>ä¸»æµæŠ€æœ¯æ ‡å‡†:
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]"
              >HTML5 + CSS3 + ES6 + TS</span
            ></div
          >
          <div class="m-3"
            >ğŸ†’ ä½¿ç”¨<b> Vue3 </b>ä¸»æµæŠ€æœ¯æ ˆ:
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]">Vite + Vue3</span></div
          >
          <div class="m-3">ğŸ¨ äºŒæ¬¡å°è£…<b> ElementPlus </b>UIç»„ä»¶,ä¼˜é›…,æ˜“ç”¨,ç¬¦åˆç¬¦åˆç›´è§‰</div>
          <div class="m-3">ğŸ–¼ å°è£…<b> Echarts </b>å’Œ<b> THREE </b>çš„2Då’Œ3Dæ•°æ®å¯è§†åŒ–åº“ç»„ä»¶</div>
          <div class="m-3"
            >ğŸ’ å°è£…å¸¸è§<b> å‰ç«¯ä¸šåŠ¡åº“ </b>çš„å®ä¾‹ç»„ä»¶:
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]"
              >xgplaye, qrcode, wangeditorç­‰</span
            ></div
          >
          <div class="m-3"
            >âš™ å°è£…åŸºäº<b> åŸç”ŸJS </b>çš„åŸç”Ÿç»„ä»¶, é‡‡ç”¨<b> WebComponents </b>çš„æ€æƒ³</div
          >
          <div class="m-3"
            >ğŸ§¬ ä½¿ç”¨<b> CSSåŸå­åŒ– </b>æŠ€æœ¯æ¡†æ¶:
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]">TailwindCSS</span>
            è½»é‡,ä¾¿æ·</div
          >
          <div class="m-3"
            >ğŸ±â€ğŸ‰ åº”ç”¨<b> å¾®å‰ç«¯ </b>æŠ€æœ¯æ¡†æ¶:
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]">MicroApp</span> æ­å»º
            <span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]"
              >Vue2, React18, Angular17</span
            >
            å¼€å‘ç¯å¢ƒ,å¯ä»¥é«˜æ•ˆå…¼å®¹å¼€å‘</div
          >
          <div class="m-3"
            >ğŸŒŸ å®éªŒ<b> ä¸ªäººUIåº“ </b
            ><span class="spanText shadow-md bg-[#ffffff] dark:bg-[#000000]">VxwUI</span>,
            æ„Ÿå…´è¶£å¯ä»¥ç§»æ­¥ä¸ªäººä¸»é¡µæŸ¥çœ‹</div
          >
          <div class="w-full flex justify-center pt-1 text-sm"
            ><div class="opacity-50">ğŸ‘‰ ç‚¹å‡»</div
            ><b class="opacity-60 cursor-pointer" @click="toDocument"> è¯¦æƒ… </b
            ><div class="opacity-50">æŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½,æ›´å¤šå®ç”¨åŠŸèƒ½ç«é€Ÿå¼€å‘ä¸­ ğŸ”¥</div></div
          >
        </div>
      </div>
      <div class="technology shadow-md bg-[#f5f5f5] dark:bg-[#282727]">
        <div class="elaborationHead text-xl">ğŸ› ï¸<b class="ml-1">æŠ€æœ¯æ ˆ</b></div>
        <Echart :options="(EchartOptions.data as EChartsOption)" :height="450"/>
      </div>
    </div>
  </div>
</template>

<style scoped lang="scss">
.homeContent {
  .head {
    display: flex;
    .userIofo {
      flex: 3;
      padding: 20px;
      border-radius: 5px;
      .userIofoHead {
        display: flex;
        align-items: center;
        min-width: 200px;
      }
    }
    .synopsis {
      flex: 7;
      border-radius: 5px;
    }
  }
  .bottom {
    display: flex;
    .elaboration {
      padding: 20px;
      flex: 1;
    }
    .technology {
      padding: 20px;
      flex: 1;
    }
  }
}
.spanText {
  border-radius: 5px;
  opacity: 1;
  padding: 2px 8px;
}
</style>
